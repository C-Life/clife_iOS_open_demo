window.het=function(){"use strict";function t(){function t(t,e,n){var o=+new Date,r="CB_"+o.toString().slice(5)+Math.floor(1e4*Math.random());return"function"==typeof t?(e=e||!1,n="undefined"==typeof n?L.callbackExpire:n,F[r]={fun:t,persist:e,expire:e?0:o+n},r):C}function o(t,e){var n,o=+new Date;return"object"==typeof F[t]&&((!!F[t].persist||F[t].expire>o)&&"function"==typeof F[t].fun?n=F[t].fun.apply(null,e):N("%cError: Callback Time-out","color:red"),u(t)),B(),n}function r(t){for(;b.length;)o(b.shift(),[t]);return!0}function a(t){for(;O.length;)o(O.shift(),[t]);return!0}function i(t,e){if(t="undefined"!=typeof t?parseInt(t):1,y(e),e=w(t,e),0===t&&!L.renderConfigData||D(e))return!1;for(var n in M)o(M[n],[e,t]);return!0}function u(t){return!(!F[t]||F[t].persist)&&(delete F[t].fun&&delete F[t].persist&&delete F[t].expire&&delete F[t])}function f(e,n,o,r,a,i){var u,f,d=0===e.indexOf("/"),l=g(n),y=t(r),h=t(a);i=i?1:0,"GET"!==o||d?(f=e.replace(/\?.+$/,""),u=c(n,e)):(f=p(e,l),u="{}"),d&&"function"==typeof E.relProxyHttp?E.relProxyHttp(f,u,o,y,h,i):"function"==typeof E.absProxyHttp?E.absProxyHttp(f,u,o,y,h):s(e,l,o,y,h)}function s(t,e,n,r,a){var i=new XMLHttpRequest;i.onreadystatechange=function(){4===i.readyState&&(200===i.status||304===i.status?o(r,[i.responseText]):o(a,["Request failed! Status code: "+i.status]))},i.open(n,t,!0),"POST"===n&&i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send(e)}function p(t,e){var n=/^([^\?#]+)(\?[^#]+)?(#.+)?$/,o=n.exec(t),r=o[1],a=o[2]?"&"+o[2].substring(1):"",i=o[3]||"";return r+"?"+e+a+i}function c(t,e){for(var n,o=/(?:\?|&)(\w+)=([^&]*)/g;null!=(n=o.exec(e));)t[n[1]]=n[2];return JSON.stringify(t)}function g(t){var e="";for(var n in t)e+=n+"="+encodeURI(t[n])+"&";return e.slice(0,-1)}function d(t){return t.data?(0===parseInt(t.type)&&l(t.data),v(t.data)):(l(t),v(t))}function l(t){var e=0;for(var n in x)e++;(!L.onceConfigData||e<=1)&&(x=t)}function y(t,e){t="string"==typeof t?JSON.parse(t):t,t=h(t);var n=h(L.updateFlagMap);for(var o in x)"undefined"!=typeof t[o]&&x[o]!==t[o]&&("updateFlag"===o&&"string"!=typeof t[o]?x[o]|=t[o]:x[o]=t[o],e&&n[o]&&(x.updateFlag=x.updateFlag||0,x.updateFlag|=Math.pow(2,n[o]-1)));return L.useUpdateFlag&&"undefined"==typeof x.updateFlag&&(x.updateFlag=0),x}function h(t,e){var n={};e=e||L.webDataMap;for(var o in t)"undefined"!=typeof e[o]?n[e[o]]=t[o]:n[o]=t[o];return n}function v(t){var e=L.webDataMap,n={};for(var o in e)n[e[o]]=o;return h(t,n)}function w(t,e){for(var n in L.filter)try{switch(L.filter[n]){case 0:0!==t&&delete e[n];break;case 1:1!==t&&delete e[n];break;default:L.filter[n](t,e)||delete e[n]}}catch(t){}return e}function B(){var t=+new Date;try{for(var e in F)!F[e].persist&&F[e].expire<t&&delete F[e].fun;return!0}catch(t){return!1}}function S(t){function e(t,e,o){var r=parseInt("undefined"==typeof o?t:o,2);return n.push(r),"undefined"!=typeof e?e:""}for(var n=[],o=/^(\d*)(\d{8})$|^\d{1,7}$/,r=t.replace(/[^01]/g,"");r.length;)r=r.replace(o,e);return n}function m(t){for(var e="",n=0;n<t.length;n++)e+=t[n].toString(16).replace(/(?=\b\w\b)/,"0");return e}function D(t){var e=0;if("object"!=typeof t)return!1;for(var n in t)e++;return!e}function N(){var t=new Date,e=(t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()+" "+t.getMilliseconds()).replace(/(?=\b\d\b)|(?=\b\d\d$)/g,"0"),n=[].slice.call(arguments);/%c/.test(n[0])||[].splice.call(n,0,0,"["+e+"]"),"undefined"!=typeof console&&console.log.apply(console,n)}function T(t,e){return o(e,Array.prototype.slice.call(arguments,0,-1))}var L={callbackExpire:3e4,torporTime:5e3,webDataMap:{},useUpdateFlag:!1,updateFlagMap:{},onceConfigData:!0,renderConfigData:!1,filter:{},company:"het",line:"common",sdkVersion:"2.0.1",nativeVersion:"",language:"zh_CN",debugMode:""},R=this,E=window[e]||{},b=[],O=[],P=[],M=[],J=[],A=[],I=[],F={},C=t(N,!0),x={},k=0;R.config=function(t){var e={};for(var n in t)"undefined"!=typeof L[n]?L[n]=t[n]:e[n]=t[n];return e=JSON.stringify(e),"function"==typeof E.config&&E.config(e)},R.nativeConfig=function(e,n,o){if(e&&e.method&&e.data){var r=e.company||L.company||"het",a=e.line||L.line||"common",i=r+"://h5/"+a+"/"+e.method,u=e.data,f=t(n),s=t(o);for(var p in u)u.hasOwnProperty(p)&&"function"==typeof u[p]&&(u[p]=t(u[p],!0));return u=JSON.stringify(u),"function"==typeof E.h5SendDataToNative&&E.h5SendDataToNative(i,u,f,s)}},R.nativeData=function(e,n,o){if(e&&e.method){var r=e.company||L.company||"het",a=e.line||L.line||"common",i=r+"://h5get/"+a+"/"+e.method,u=t(n),f=t(o);return"function"==typeof E.h5GetDataFromNative&&E.h5GetDataFromNative(i,u,f)}},R.getDeviceInfo=function(e,n){var o=t(e),r=t(n);return"function"==typeof E.getDeviceInfo&&E.getDeviceInfo(o,r)},R.getBLERealTimeData=function(e,n){var o=t(e),r=t(n);return"function"==typeof E.getBLERealTimeData&&E.getBLERealTimeData(o,r)},R.getBLETimeData=function(e,n){var o=t(e),r=t(n);return"function"==typeof E.getBLETimeData&&E.getBLETimeData(o,r)},R.setBLETimeData=function(e,n){var o=t(e),r=t(n);return"function"==typeof E.setBLETimeData&&E.setBLETimeData(o,r)},R.getBLEHistoryData=function(e,n,o){var r=t(e),a=t(n),i=t(o,!0);return"function"==typeof E.getBLEHistoryData&&E.getBLEHistoryData(r,a,i)},R.getDeviceMcuUpgrade=function(e,n,o){var r=t(e),a=t(n),i=t(o,!0);return"function"==typeof E.getDeviceMcuUpgrade&&E.getDeviceMcuUpgrade(r,a,i)},R.getAPPJSBridegeVersion=function(e,n){return J.push(t(e)),"function"==typeof E.getAPPJSBridegeVersion&&E.getAPPJSBridegeVersion(n||L.sdkVersion)},R.getAPPLanguage=function(e){return A.push(t(e)),"function"==typeof E.getAPPLanguage&&E.getAPPLanguage()},R.onLoadH5Failed=function(t,e){return"function"==typeof E.onLoadH5Failed&&E.onLoadH5Failed(t,e)},R.ready=function(e){b.push(t(e,!0))},R.listenBLEState=function(e){O.push(t(e,!0))},R.listenBLEStateData=function(e){I.push(t(e,!0))},R.listenBLEPower=function(e){P.push(t(e,!0))},R.domReady=function(t){document.addEventListener("DOMContentLoaded",t)},R.repaint=function(e){M.push(t(e,!0))},R.send=function(e,n,o){"undefined"!=typeof x.updateFlag&&(x.updateFlag=0);var r=t(n),a=t(o),i=JSON.stringify(y(e,!0));return k=+new Date,"print"==L.debugMode&&N("send:",i),"function"==typeof E.send&&"{}"!=i&&E.send(i,r,a)},R.get=function(t,e,n,o,r){f(t,e,"GET",n,o,r)},R.post=function(t,e,n,o,r){f(t,e,"POST",n,o,r)},R.diff=function(t){var e=h(t),n={};for(var o in e)"undefined"!=typeof x[o]&&e[o]!=x[o]&&(n[o]=e[o]);return v(n)},R.setTitle=function(t){"function"==typeof E.setTitle&&E.setTitle(t),document.title=t},R.calcUpdateFlag=function(t){return Math.pow(2,t-1)},R.hexUpFlag=function(t,e,n,o){var r,a=(o||0).toString(16).replace(/(?=\b\w\b)/,"0"),i=[],u="",f=[];e=e||1,n=n||4;for(var s=0;s<a.length;s+=2)i.push(parseInt(a.substring(s,s+2),16));for(var p=0;p<t;p++)u="0"+u;for(var c=0;c<e;c++)u="1"+u;r=S(u);for(var g=0;g<i.length||g<r.length||g<n;g++)f.push((i[g]||0)|(r[g]||0));return m(f)},R.toast=function(t){return"function"==typeof E.tips?E.tips(t):alert(t)},R.showToast=function(e,n,o,r,a,i,u,f){var s=t(i),p=t(u),c=t(f);return"function"==typeof E.showToast?E.showToast(e,n,o,r||1500,a||0,s,p,c):alert(e)},R.hideToast=function(){return"function"==typeof E.hideToast&&E.hideToast()},R.showAlertView=function(e,n,o,r,a,i,u,f,s,p){var c=t(f),g=t(s),d=t(p);return"function"==typeof E.showAlertView&&E.showAlertView(e,n,o||!0,r||"取消",a||"#000000",i||"确定",u||"#3CC51F",c,g,d)},R.showShareActionSheet=function(e,n,o,r,a,i,u){var f=t(a),s=t(i),p=t(u);return"function"==typeof E.showShareActionSheet&&E.showShareActionSheet(e,n,o,r,f,s,p)},R.showActionSheet=function(e,n,o,r,a,i){n=JSON.stringify(n);var u=t(r),f=t(a),s=t(i);return"function"==typeof E.showActionSheet&&E.showActionSheet(e,n,o||"#000000",u,f,s)},R.setNavigationBarTitle=function(e,n,o,r,a,i,u){var f=t(a),s=t(i),p=t(u);return"function"==typeof E.setNavigationBarTitle&&E.setNavigationBarTitle(e,n,o,r,f,s,p)},R.setNavigationBarLeftBarButtonItems=function(e,n,o){e=JSON.stringify(e);var r=t(n),a=t(o);return"function"==typeof E.setNavigationBarLeftBarButtonItems&&E.setNavigationBarLeftBarButtonItems(e,r,a)},R.setNavigationBarRightBarButtonItems=function(e,n,o){e=JSON.stringify(e);var r=t(n),a=t(o);return"function"==typeof E.setNavigationBarRightBarButtonItems&&E.setNavigationBarRightBarButtonItems(e,r,a)},R.setNavigationBarMenuItem=function(e,n,o,r,a){var i=t(o),u=t(r),f=t(a);return"function"==typeof E.setNavigationBarMenuItem&&E.setNavigationBarMenuItem(e,n,i,u,f)},R.getNetworkType=function(e,n){var o=t(e),r=t(n);return"function"==typeof E.getNetworkType&&E.getNetworkType(o,r)},R.onNetworkStatusChange=function(e,n){var o=t(e,!0),r=t(n,!0);return"function"==typeof E.onNetworkStatusChange&&E.onNetworkStatusChange(o,r)};var H={ready:function(t){return t="string"==typeof t?JSON.parse(t):t,r(t)},success:function(t,e){return k=0,t=t&&"string"==typeof t?JSON.parse(t):t,o(e,Array.prototype.slice.call(arguments,0,-1))},error:T,httpResponseSuccess:T,httpResponseError:T,nativeResponse:T,repaint:function(t){return"print"==L.debugMode&&N("repaint:","string"==typeof t?t:JSON.stringify(t)),t="string"==typeof t?JSON.parse(t):t,+new Date-k<L.torporTime?(N("%cWarning: torpid time","color:#5f3e05"),!1):i(t.type,d(t))},updataRunData:function(t){t="string"==typeof t?JSON.parse(t):t,t.type=1,H.repaint(t)},updataControlData:function(t){t="string"==typeof t?JSON.parse(t):t,t.type=0,H.repaint(t)},updataErrorData:function(t){t="string"==typeof t?JSON.parse(t):t,t.type=1,H.repaint(t)},updataConfigData:function(t){t="string"==typeof t?JSON.parse(t):t,t.type=1,H.repaint(t)},updataOnOffState:function(t){var e={};e.type=1,e.data={onlineStatus:t},H.repaint(e)},getDeviceInfoResponse:T,getBLERealTimeDataResponse:T,getBLEHistoryDataResponse:T,sendBLEStateType:function(t){return t="string"==typeof t?JSON.parse(t):t,a(t)},sendBLEPower:function(t){for(t="string"==typeof t?JSON.parse(t):t;P.length;)o(P.shift(),[t]);return!0},sendAPPJSBridegeVersion:function(t){for(;J.length;)o(J.shift(),[t])},sendAPPLanguage:function(t){for(;A.length;)o(A.shift(),[t||window.navigator.language])},showToastResponse:T,showAlertViewResponse:T,showActionSheetResponse:T,setNavigationBarTitleResponse:T,setNavigationBarLeftBarButtonItemsResponse:T,setNavigationBarRightBarButtonItemsResponse:T,setNavigationBarMenuItemResponse:T,getNetworkTypeResponse:T,onNetworkStatusChangeResponse:T,getBLETimeDataResponse:T,setBLETimeDataResponse:T,getDeviceMcuUpgradeResponse:T,showShareActionSheetResponse:T,sendBLEStatusData:function(t,e){for(;I.length;)o(I.shift(),[t,e])}};window[n]=H}var e="bindJavaScript",n="webInterface";return new t}();